async function getContent(t,e,o){try{const r=await fetch(`/${t}`),n=await r.text(),l=(new DOMParser).parseFromString(n,"text/html").querySelector(e);function a(){l.querySelectorAll("#result>a").forEach(t=>{document.querySelector("[data-webloog-post-list]").insertAdjacentHTML("beforeend",`<div class="p-4 rounded-2xl bg-container shadow-sm font-bold text-center flex flex-col gap-4">${t.outerHTML}<span class="text-text/70 text-xs font-normal">${t.nextElementSibling.textContent}</span><div class="flex text-text/70 flex-row items-center justify-center gap-2"><a class="bg-button/50 hover:bg-button hover:text-text animation flex flex-row items-center gap-2 rounded-2xl p-2" href="${t.getAttribute("href")}"><span class="material-symbols-rounded">link</span></a><button data-webloog-comment-for="${t.getAttribute("href").split("/")[2]}" class="bg-button/50 hover:bg-button hover:text-text animation flex flex-row items-center gap-2 rounded-2xl p-2"><span class="material-symbols-rounded pointer-events-none">chat</span></button></div></div>`)}),l.querySelector(".pagination a[title='صفحه بعدی']")&&(document.querySelector("[data-webloog-post-list-pagination]").innerHTML=`<button class="bg-primary text-onPrimary mx-auto flex max-w-fit flex-row items-center gap-2 rounded-2xl px-8 py-2 mt-8 font-medium hover:opacity-90" onClick="getContent('posts${l.querySelector(".pagination a[title='صفحه بعدی']").getAttribute("href")}', '#result', '[data-webloog-post-list]')"><span class="material-symbols-rounded">add</span>مطالب بیشتر</button>`)}t.includes("profile")&&(document.querySelector(o).outerHTML=`<div class="bg-container p-8 shadow-sm rounded-2xl">${l.innerHTML}<div class="clear-both"></div></div>`),"posts"===t&&(document.querySelector(o).outerHTML='<div data-webloog-post-list class="ss:grid-cols-2 grid grid-cols-1 gap-4 px-4 md:grid-cols-3"></div><div data-webloog-post-list-pagination class="text-center"></div>',a()),t.includes("posts?p=")&&a()}catch(t){console.log(t)}}const commentContainer=document.querySelector("[data-webloog-comment-target]");document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-webloog-comment-counter]").forEach(t=>{const e=t.getAttribute("data-webloog-comment-counter");let o=0;try{for(let t=0;t<BlogComments.length;t+=2)if(BlogComments[t]==e){o=BlogComments[t+1];break}t.outerHTML=0==o?"دیدگاه":`${o} دیدگاه`}catch(t){}})});try{document.querySelectorAll("[data-webloog-article-content] table").forEach(t=>{t.outerHTML=`<div class="overflow-auto">${t.outerHTML}</div>`})}catch(t){}document.querySelector("[data-webloog-menu-toggle]").addEventListener("click",()=>{htmlClass.toggle("menu")}),document.querySelectorAll("[data-webloog-overlay-close],[data-webloog-close]").forEach(t=>{t.addEventListener("click",()=>{htmlClass.contains("menu")&&htmlClass.remove("menu"),htmlClass.contains("comment")&&htmlClass.remove("comment")})}),document.querySelector("[data-webloog-search-toggle]").addEventListener("click",()=>{htmlClass.toggle("search"),htmlClass.contains("search")&&document.querySelector("[data-webloog-search-input]").focus()}),document.querySelector("[data-webloog-theme-toggle]").addEventListener("click",()=>{htmlClass.toggle("dark"),localStorage.getItem("theme")?localStorage.removeItem("theme"):localStorage.setItem("theme","dark")}),document.querySelectorAll("[data-webloog-navigate]").forEach(t=>{const e=t.getAttribute("data-webloog-navigate");t.addEventListener("click",()=>{document.documentElement.setAttribute("data-show",t.getAttribute("data-webloog-navigate")),document.documentElement.scrollTop=0,e.includes("profile")&&document.querySelector(`#${e}`)&&getContent("profile","#wrapper",`#${e}`),e.includes("posts")&&document.querySelector(`#${e}`)&&getContent("posts","#result",`#${e}`)})}),document.querySelectorAll("[data-webloog-aside-button]").forEach(t=>{t.addEventListener("click",()=>{const e=t.nextElementSibling;t.parentElement.classList.contains("actv")?(t.parentElement.classList.remove("actv"),e.style.height=0):(t.parentElement.classList.add("actv"),e.style.height=e.scrollHeight+"px")})}),document.body.addEventListener("click",t=>{if(t.target.matches("[data-webloog-comment-for]")){htmlClass.add("comment"),commentContainer.innerHTML=`<${"ifr" + "ame"} src="/comments/?blogid=<-BlogId->&postid=${t.target.getAttribute("data-webloog-comment-for")}" class="block invisible size-full bg-body border-none"></${"ifr" + "ame"}>`;const e=commentContainer.querySelector("iframe");e.onload=(()=>{try{e.contentWindow.document.head.querySelector("link[rel=stylesheet]").remove()}catch(t){}const t=document.querySelector("link[data-font]")&&document.querySelector("link[data-font]").outerHTML,o=document.querySelector("style[data-style]")&&document.querySelector("style[data-style]").outerHTML,a=t+o+"<style>#content{direction:rtl}*{box-sizing:border-box;color:var(--text);font-family:Mikhak FD,sans-serif!important;font-size:12px!important;line-height:1.8!important;text-align:right}a{font-weight:500;color:var(--primary);text-decoration:none}body{background-color:none;padding:16px;margin:0}#header{font-weight:700;font-size:11pt!important;text-align:center;margin-bottom:16px;padding:8px;}.clear{clear:both}.box{background-color:var(--container);border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)}.box .head{margin-bottom:10px;display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap;align-items:center;border-bottom:1px solid var(--button);padding-bottom:8px}.box .head .clear{display:none}.box .author,.box .author a  {font-size:14px!important;font-weight:500!important}.box .date{margin-top:5px;opacity:0.7}.reply{border-radius:16px;background:var(--button);padding:16px;margin-top:10px;}.reply .rt{padding-left:8px;opacity:0.7;}#navbar{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:2px;margin-bottom:16px}#navbar *{border-radius:16px;display:inline-block;background-color:var(--container);height:30px;line-height:30px!important;width:30px;text-align:center;}#navbar span{border-color:transparent;background-color:var(--button)}.formbox{background-color:var(--container);border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);}.formbox .head{padding:8px;text-align:center;background:var(--primary);color:var(--onPrimary);font-weight:500;font-size:10pt;border-radius:16px;margin-bottom:16px}.formbox form{display:flex;flex-direction:column;gap:5px;align-items:stretch}.formbox form label{opacity:0.7}.formbox form input,.formbox form textarea{padding:4px 10px;border-radius:16px;outline:0;border:1px solid var(--button);display:block;background:none}.formbox form textarea{resize:vertical;width:100%!important;min-height:120px;padding:16px}#chkPrivate,#chkSave{display:inline-block}.formbox .btn{display:block;color:var(--onPrimary);margin:auto;min-width:150px;text-align:center;background-color:var(--primary);}#capspace{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;gap:5px}#capspace .lbl{width:100%}#smspace{display:block;position:absolute;left:0;bottom:0;width:fit-content;border:1px solid var(--outline);background-color:var(--bold);border-radius:16px;z-index:1}#cmtemail + div{position:relative}.sbox{padding:5px}.sbox,.sbox div{display:flex;flex-direction:row;flex-wrap:wrap;gap:5px;width:auto!important;float:none!important}.sbox *,.Off,.On{font-size:17px!important}</style>";e.contentWindow.document.head.insertAdjacentHTML("beforeend",a),htmlClass.contains("dark")&&e.contentWindow.document.documentElement.classList.add("dark"),e.classList.remove("invisible")})}});